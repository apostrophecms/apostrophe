openapi: 3.1.0
info:
  title: ApostropheCMS REST API â€” Example Pieces
  version: 1.0.0
  description: |
    ðŸš§ **EXAMPLE ONLY â€” These routes are not part of ApostropheCMS core.**

    ## Common Custom Piece Types
    The examples in this API documentation use common piece types that projects typically implement:
    - `article` - Blog posts and content pages
    - `event` - Calendar events and announcements

    *Note: Custom piece types are defined in your project configuration and follow the same API patterns.*

    This file demonstrates what piece routes *would look like* if you added
    custom modules (e.g., `article`, `event`) in your project. Do not assume
    these endpoints exist in a fresh ApostropheCMS install.

    Use this spec for learning, prototyping, or mocking APIs with tools like
    Prism or Swagger UI. For the real ApostropheCMS core API, see
    `apostrophecms-openapi.yaml`.
  contact:
    name: ApostropheCMS Support
    url: https://apostrophecms.com
    email: support@apostrophecms.com
  license:
    name: MIT
    url: https://github.com/apostrophecms/apostrophe/blob/main/LICENSE.md

security:
  - SessionAuth: []

servers:
  - url: http://localhost:3000/api/v1
    description: Development server
  - url: https://your-site.com/api/v1
    description: Production server (not for online use)

tags:
  - name: Examples
    description: Sample piece routes for learning and prototyping.
  - name: "(Example) Article"
    description: "**Example only.** Custom piece type that requires project configuration."
  - name: "(Example) Event"
    description: "**Example only.** Custom piece type that requires project configuration."

x-apostrophe:
  cmsVersion: ">=4.20.0"
  notes: |
    ðŸš§ This spec is for **examples only**.
    - These endpoints do not exist in a new ApostropheCMS project.
    - They represent common piece types you might create manually.
    - Use for developer reference, training, or API mocking.
  isExamplesSpec: true

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: query
      name: apikey
      description: |
        **Server-to-server authentication** - API key for server-to-server communication.
        Use as query parameter: ?apikey=your-api-key-here

        Configure in app.js:
        ```javascript
        '@apostrophecms/express': {
          options: {
            apiKeys: {
              'myapikey1029384756': { role: 'admin' }
            }
          }
        }
        ```

    BearerAuth:
      type: http
      scheme: bearer
      description: |
        âš ï¸ **Security Note:** Only use test credentials in this online sandbox.
        Real credentials should never be entered in public documentation.

        Bearer token authentication (recommended for API clients).

        **Step 1:** Use the `POST /@apostrophecms/login/login` endpoint below with:
        ```json
        {
          "username": "your-username",
          "password": "your-password"
        }
        ```

        **Step 2:** Copy **only the token value** from the response (not the full JSON)
        Example: if response is `{"token": "abc123"}`, paste only `abc123`
        The token will be sent as: Authorization: Bearer {your-token}

    SessionAuth:
      type: apiKey
      in: cookie
      name: project-shortname.sid
      description: |
        âš ï¸ **For testing after download only:** Change "project-shortname" in the `SessionAuth` to your actual 
        ApostropheCMS shortname (e.g., "myapp.sid").

        ðŸ’¡ This authentication won't work when testing in the online ApostropheCMS sandbox. However, you can use the login route to set a cookie you can examine in your browser DevTools.
        It will be named `project-shortname.sid`.

        **Step 1:** Use the `POST /@apostrophecms/login/login` endpoint below with:
        ```json
        {
          "username": "your-username",
          "password": "your-password",
          "session": true
        }
        ```

        **Step 2:** Copy the session cookie value from your browser's dev tools 
        and paste it into the "Value" field above.

  parameters:
    Page:
      name: page
      in: query
      description: "Page number for pagination (1-based)"
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1
      example: 2

    PerPage:
      name: perPage
      in: query
      description: "Number of items per page"
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 10
      example: 25

    Search:
      name: search
      in: query
      description: "Search term for filtering results"
      required: false
      schema:
        type: string
      example: "headless cms"

    Autocomplete:
      name: autocomplete
      in: query
      description: "Partial word search for autocomplete functionality"
      required: false
      schema:
        type: string
      example: "apost"

    AposMode:
      name: aposMode
      in: query
      description: "Request draft or published version of content"
      required: false
      schema:
        type: string
        enum: [draft, published]
        default: published
      example: "published"

    AposLocale:
      name: aposLocale
      in: query
      description: "Locale for internationalization (e.g., 'en', 'fr', 'es')"
      required: false
      schema:
        type: string
        example: "fr"

    ToLocale:
      name: toLocale
      in: path
      required: true
      description: Target locale code (e.g., en:us:published)
      schema:
        type: string
        pattern: '^[a-z]{2}(-[A-Z]{2})?$'
        example: en

    RenderAreas:
      name: render-areas
      in: query
      description: "ðŸ’¡ Render widget areas as HTML instead of returning raw widget data - useful for hybrid architectures"
      required: false
      schema:
        type: boolean
        default: false
      example: true

    DocumentId:
      name: _id
      in: path
      required: true
      description: "Document ID (can include mode and locale, e.g., id:en:published)"
      schema:
        type: string
        example: "ckitdo5oq004pu69kr6oxo6fr:en:published"

    AllPages:
      name: all
      in: query
      description: "Include entire page tree regardless of depth (use with caution for large sites)"
      schema:
        type: string
        enum: ["1"]
      example: "1"

    FlatResponse:
      name: flat
      in: query
      description: "ðŸ’¡ Return pages in flat array instead of tree structure - easier for some use cases"
      schema:
        type: string
        enum: ["1"]
      example: "1"

    ChildrenParam:
      name: children
      in: query
      description: "Include children array in response (set to 'false' to exclude)"
      schema:
        type: string
        enum: ["false"]
      example: "false"

    Sort:
      name: sort
      in: query
      description: |
        Sort results by specified field(s). Use field name for ascending order, 
        prefix with '-' for descending order. Multiple fields can be separated by commas.
        Common sortable fields include: title, createdAt, updatedAt, publishedAt, slug.
      required: false
      schema:
        type: string
        example: "-updatedAt,title"
      examples:
        newest_first:
          summary: Newest first
          value: "-createdAt"
        oldest_first:
          summary: Oldest first
          value: "createdAt"
        alphabetical:
          summary: Alphabetical by title
          value: "title"
        reverse_alphabetical:
          summary: Reverse alphabetical
          value: "-title"
        multiple_fields:
          summary: Multiple sort fields
          value: "-publishedAt,title"
        updated_recently:
          summary: Most recently updated
          value: "-updatedAt"

  schemas:

    _Overview_Fields:
      type: object
      description: |
        # Field Types (editor-facing)

        - `StringField` â€” basic text
        - `IntegerField`, `FloatField` â€” numbers
        - `SelectField`, `RadioField`, `CheckboxesField` â€” choices
        - `AreaField`, `ArrayField`, `ObjectField`
        - `AttachmentField`, `RelationshipField`, `RelationshipReverseField`

        ðŸ‘‰ See also: **FieldDefinition** (discriminator: `type`).

      externalDocs:
        description: ApostropheCMS Field Guide
        url: https://docs.apostrophecms.org/reference/field-types/

    _Overview_Primitives:
      type: object
      description: |
        # Content Primitives (payload-level)

        These are the â€œdata atomsâ€ for requests and responses.
        - `AposString`, `AposSlug`, `AposUrl`, `AposEmail`
        - `AposDateTime`, `AposDate`, `AposTime`
        - Arrays: `AposStringArray`, `AposIntegerArray`, etc.

        ðŸ‘‰ Defined under **AposPrimitives**.

    _Overview_Advanced:
      type: object
      description: |
        # Advanced / Internal

        Used by OpenAPI for schema defs:
        - `UiCondition` (for `if`/`requiredIf`)
        - `OperatorObject` (query operators)
        - `AreaOptions`, `ArrayOptions`, and other config helpers


    # Core schema fields
    # --- Field-definition objects ---

    AreaField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ area ]
              description: Apostrophe field type id.
            options:
              $ref: '#/components/schemas/AreaOptions'
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, options ]
          examples:
            - type: area
              label: "Main content"
              options:
                max: 3
                expanded: true
                widgets:
                  "@apostrophecms/image": {}
                  "@apostrophecms/rich-text":
                    toolbar: [ "bold", "italic" ]
                  "@apostrophecms/video": {}
                  "@apostrophecms/html": {}
                groups:
                  basics:
                    label: "Basic Content"
                    columns: 3
                    widgets:
                      "@apostrophecms/rich-text": { toolbar: [ "bold" ] }
                      "@apostrophecms/image": {}
                  embeds:
                    label: "Embeds"
                    columns: 2
                    widgets:
                      "@apostrophecms/video": {}
                      "@apostrophecms/html": {}

    AreaOptions:
      type: object
      additionalProperties: false
      properties:
        widgets:
          description: >
            Allowed widget types for this area. Keys are widget module names
            (e.g., "@apostrophecms/rich-text"). Values are per-widget options
            that apply *only* in this area. 
          type: object
          additionalProperties:
            type: object
        groups:
          description: >
            Organize widgets into groups for the expanded preview menu.
            Each group has a label, optional columns (1â€“4, default 3),
            and its own widgets map (same shape as `widgets`). 
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AreaWidgetGroup'
        max:
          type: integer
          description: Maximum number of widgets allowed in this area.
        expanded:
          type: boolean
          description: Use the expanded preview menu UX.
      required: [ widgets ]

    AreaWidgetGroup:
      type: object
      additionalProperties: false
      properties:
        label:
          type: string
        columns:
          type: integer
          minimum: 1
          maximum: 4
          description: Number of widget previews per row (default 3).
        widgets:
          type: object
          additionalProperties:
            type: object
      required: [ label, widgets ]

    ArrayField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          description: >
            A repeatable list of objects, each with its own field schema.
          properties:
            type:
              type: string
              enum: [ array ]
              description: Apostrophe field type id.
            fields:
              $ref: '#/components/schemas/Fieldset'
            min:
              type: integer
              description: Minimum number of items (inclusive).
            max:
              type: integer
              description: Maximum number of items (inclusive).
            # Optional: a per-item label source (nice-to-have for editor UI)
            titleField:
              type: string
              description: >
                Field name in each item used as the item label in the UI.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, fields ]
          examples:
            - type: array
              label: "Tasks"
              min: 0
              max: 50
              titleField: "title"
              items:
                type: object
                properties:
                  title:
                    type: string
                  priority:
                    type: string
              fields:
                add:
                  title:
                    type: string
                    label: "Task Title"
                  priority:
                    type: select
                    label: "Priority"
                    choices:
                      - { label: "Low",  value: "low" }
                      - { label: "High", value: "high" }

    AttachmentField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          description: >
            Lets editors upload a single file (image, PDF, etc.). Use an ArrayField
            of AttachmentField if you need multiple files.
          properties:
            type:
              type: string
              enum: [ attachment ]
              description: Apostrophe field type id.
            # Optional: narrow what the editor can pick/upload
            accept:
              oneOf:
                - type: string
                  description: >
                    HTML "accept" string (e.g., "image/*,.pdf"). Use to limit by
                    MIME type and/or extension.
                - type: array
                  items:
                    type: string
                  description: >
                    List of MIME types and/or extensions (e.g., ["image/*", ".pdf"]).
            maxSize:
              type: integer
              description: Optional max file size in bytes (documentation-only hint).
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: attachment
              label: "Resume (PDF)"
              accept: [ ".pdf" ]
              required: true
            - type: attachment
              label: "Hero Image"
              accept: "image/*"

    BooleanField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ boolean ]
              description: Apostrophe field type id.
            def:
              type: boolean
              description: Default value shown in the editor UI.
            toggle:
              oneOf:
                - type: boolean
                  description: |
                    If true, use the alternate "toggle" UI. Labels default to
                    the field label and standard true/false text.
                - type: object
                  additionalProperties: false
                  description: Configure custom labels for the toggle UI.
                  properties:
                    "true":
                      type: string
                      description: Label to display when value is true.
                    "false":
                      type: string
                      description: Label to display when value is false.
          required: [ type, label ]
          examples:
            - type: boolean
              label: "Is this a special item?"
              def: false
            - type: boolean
              label: "Show related articles?"
              toggle:
                "true": "Show related articles"
                "false": "Hide related articles"

    CheckboxesField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ checkboxes ]
              description: Apostrophe field type id.
            def:
              type: array
              items:
                oneOf:
                  - type: string
                  - type: number
                  - type: boolean
              description: Default selected values.
            choices:
              oneOf:
                - type: array
                  description: Static choices for the checkboxes.
                  items:
                    $ref: '#/components/schemas/SelectChoice'
                - type: string
                  description: >
                    Method name that provides choices dynamically.
            following:
              oneOf:
                - type: string
                - type: array
                  items:
                    type: string
              description: >
                Populate dynamically based on other fields (supports `<` parent prefixes).
            followingIgnore:
              oneOf:
                - type: boolean
                - type: array
                  items:
                    type: string
              description: >
                Ignore some or all followed fields when generating values.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, choices ]
          examples:
            - type: checkboxes
              label: "Tags"
              choices:
                - { label: "News", value: "news" }
                - { label: "Blog", value: "blog" }
                - { label: "Events", value: "events" }
              def: [ "news", "events" ]

    ColorField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ color ]
              description: Apostrophe field type id.
            def:
              type: string
              pattern: "^#(?:[0-9a-fA-F]{3}){1,2}$"
              description: Default hex color (e.g. "#ff0000").
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: color
              label: "Theme Color"
              def: "#336699"

    DateField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - $ref: '#/components/schemas/DateBoundaryOptions'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ date ]
              description: Apostrophe field type id.
            def:
              type: string
              format: date
              description: Default date shown in the editor UI (YYYY-MM-DD).
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: date
              label: "Publish Date"
              def: "2025-01-01"
              min: "2020-01-01"
              max: "2030-12-31"
            - type: date
              label: "Event Date"
              if:
                status: { $eq: "scheduled" }

    DateAndTimeField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - $ref: '#/components/schemas/DateTimeBoundaryOptions'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ dateAndTime ]
              description: Apostrophe field type id.
            def:
              type: string
              format: date-time
              description: >
                Default timestamp in RFC 3339 format (e.g., 2025-08-29T13:00:00Z).
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: dateAndTime
              label: "Starts At"
              def: "2025-08-29T13:00:00Z"
              min: "2024-01-01T00:00:00Z"
              max: "2026-12-31T23:59:59Z"
            - type: dateAndTime
              label: "Reminder At"
              requiredIf:
                remindersEnabled: true

    EmailField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ email ]
              description: Apostrophe field type id.
            def:
              type: string
              format: email
              description: Default email address shown in the editor UI.
            pattern:
              type: string
              description: >
                Optional regex for stricter validation (in addition to HTML5
                email validation).
            autocomplete:
              type: string
              description: >
                Value for the HTML autocomplete attribute. Common values are
                "email" or "off".
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: email
              label: "Contact Email"
              def: "info@example.com"
            - type: email
              label: "Support Email"
              autocomplete: "email"
              requiredIf:
                supportEnabled: true

    FloatField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - $ref: '#/components/schemas/NumericRangeOptions'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ float ]
            format:
              type: string
              enum: [ float ]
              description: OpenAPI hint for tooling; always "float".
            # Override def type to be number for floats
            def:
              type: number
              format: float
              description: Default decimal value.
          examples:
            - type: float
              label: "Price (USD)"
              help: "Enter a decimal price."
              def: 0.0
              min: 0
              max: 99999.99
              required: true

    IntegerField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - $ref: '#/components/schemas/NumericRangeOptions'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ integer ]
              description: Apostrophe field type id.
            def:
              type: integer
              description: Default integer value shown in the editor UI.
          required: [ type, label ]
          examples:
            - type: integer
              label: "Age"
              min: 0
              max: 120
              def: 18
            - type: integer
              label: "Estimated Hours"
              min: 1
              max: 999

    ObjectField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          description: A nested object with its own field schema.
          properties:
            type:
              type: string
              enum: [ object ]
            fields:
              $ref: '#/components/schemas/Fieldset'   # { add: { ...field defs... } }
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, fields ]

    OembedField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ oembed ]
              description: Apostrophe field type id.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          description: >
            Lets editors paste a media URL from an oEmbed-compatible host.
            The editor shows an immediate preview once a valid URL is entered.
            Stored value is an object snapshot (url/title/thumbnail).
          examples:
            - type: oembed
              label: "Featured video"

    PasswordField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ password ]
              description: Apostrophe field type id.
            def:
              type: string
              description: Default password value (generally not used).
            min:
              type: integer
              description: Minimum number of characters required.
            max:
              type: integer
              description: Maximum number of characters allowed.
            pattern:
              type: string
              description: >
                Regex to enforce password rules (e.g., at least one number).
            autocomplete:
              type: string
              description: >
                HTML autocomplete attribute, usually "new-password" or "current-password".
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: password
              label: "Account Password"
              min: 8
              autocomplete: "new-password"

    RadioField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ radio ]
              description: Apostrophe field type id.
            def:
              oneOf:
                - type: string
                - type: number
                - type: boolean
              description: Default selected value.
            choices:
              oneOf:
                - type: array
                  description: Static choices to render as radio buttons.
                  items:
                    $ref: '#/components/schemas/SelectChoice'
                - type: string
                  description: >
                    Method name that provides choices (e.g. "statusChoices").
            following:
              oneOf:
                - type: string
                - type: array
                  items:
                    type: string
              description: >
                Populate dynamically based on other fields (supports `<` parent prefixes).
            followingIgnore:
              oneOf:
                - type: boolean
                - type: array
                  items:
                    type: string
              description: >
                Ignore some or all followed fields when generating values.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, choices ]
          examples:
            - type: radio
              label: "Priority"
              choices:
                - { label: "Low", value: "low" }
                - { label: "High", value: "high" }
              def: "low"
            - type: radio
              label: "Status"
              choices: "statusChoices"   # dynamic

    RangeField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - $ref: '#/components/schemas/NumericRangeOptions'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ range ]
              description: Apostrophe field type id.
            def:
              type: number
              description: Default slider value in the editor UI.
            step:
              type: number
              description: >
                Increment step for the slider. If omitted, defaults to 1.
            min:
              type: number
              description: Minimum value for the slider.
            max:
              type: number
              description: Maximum value for the slider.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: range
              label: "Satisfaction"
              min: 1
              max: 10
              step: 1
              def: 5
            - type: range
              label: "Volume"
              min: 0
              max: 100
              step: 5
              def: 50

    RelationshipField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          description: >
            Relate this document to one or more docs of another type (pieces/pages).
            Use `max: 1` for a single-select join; omit `max` (or set >1) for multi-select.
          properties:
            type:
              type: string
              enum: [ relationship ]
              description: Apostrophe field type id.
            withType:
              type: string
              description: >
                Module name of the related doc type (e.g., "article", "@apostrophecms/image").
            min:
              type: integer
              description: Minimum number of related docs required (inclusive).
            max:
              type: integer
              description: Maximum number of related docs allowed (inclusive).
            fields:
              $ref: '#/components/schemas/Fieldset'
            # Cursor builders applied when fetching related docs (project, sort, etc.)
            builders:
              type: object
              additionalProperties: true
              description: >
                Apostrophe cursor builders for the related query
                (e.g., { project: { title: 1 }, sort: { title: 1 } }).
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, withType ]
          examples:
            - type: relationship
              label: "Author"
              withType: "person"
              max: 1
              builders:
                project: { title: 1, _url: 1 }
            - type: relationship
              label: "Related Articles"
              withType: "article"
              min: 0
              max: 5
              fields:
                add:
                  relationshipRole:
                    type: "select"
                    label: "Role"
                    choices:
                      - { label: "Primary", value: "primary" }
                      - { label: "Secondary", value: "secondary" }
              builders:
                project: { title: 1, _url: 1 }
                sort: { title: 1 }

    RelationshipReverseField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          description: >
            Read-only reverse side of a forward `relationship` field defined on
            another type. Use this to show â€œreferenced byâ€ links without storing
            ids here.
          properties:
            type:
              type: string
              enum: [ relationshipReverse ]
              description: Apostrophe field type id.
            withType:
              type: string
              description: Module name that holds the forward relationship.
            reverseOf:
              type: string
              description: >
                Name of the forward relationship field on `withType`
                (e.g., "_authors" on "article").
            builders:
              type: object
              additionalProperties: true
              description: Cursor builders applied when populating the reverse join.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label, withType, reverseOf ]
          examples:
            - type: relationshipReverse
              label: "Articles referencing this person"
              withType: "article"
              reverseOf: "_authors"
              builders:
                project: { title: 1, _url: 1 }

    SelectField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ select ]
              description: Apostrophe field type id.
            # default value in the editor UI
            def:
              oneOf:
                - type: string
                - type: number
                - type: boolean
                - type: array
                  items:
                    oneOf:
                      - type: string
                      - type: number
                      - type: boolean
              description: >
                Default value. If `multiple: true`, this should be an array.
            multiple:
              type: boolean
              description: Allow selecting multiple values (stores an array).
            # Static choices OR dynamic choices via a method name string
            choices:
              oneOf:
                - type: array
                  description: Static choices for the select dropdown.
                  items:
                    $ref: '#/components/schemas/SelectChoice'
                - type: string
                  description: >
                    Name of a method that returns choices (e.g. "sponsorNames").
                    May be "module:method" to reference another module.
            following:
              oneOf:
                - type: string
                - type: array
                  items:
                    type: string
              description: >
                Populate dynamically based on other fieldsâ€™ values (supports `<` parent prefixes).
            followingIgnore:
              oneOf:
                - type: boolean
                - type: array
                  items:
                    type: string
              description: >
                Ignore some or all followed fields when generating values.
          required: [ type, label ]
          examples:
            - type: select
              label: "Task Priority"
              choices:
                - { label: "Low", value: "low" }
                - { label: "Medium", value: "medium" }
                - { label: "High", value: "high" }
                - { label: "Critical", value: "critical" }
              def: "medium"
            - type: select
              label: "Tags"
              multiple: true
              choices:
                - { label: "News", value: "news" }
                - { label: "Blog", value: "blog" }
                - { label: "Events", value: "events" }
              def: [ "news", "events" ]
            - type: select
              label: "Sponsor"
              choices: "sponsorNames"   # dynamic choices by method
              following: [ "<projectType" ]

    SelectChoice:
      type: object
      additionalProperties: false
      properties:
        label:
          type: string
          description: Human-friendly label shown in UI.
        value:
          oneOf:
            - type: string
            - type: number
            - type: boolean
          description: The stored value for this choice.
        disabled:
          type: boolean
          description: If true, show but disable this option.
      required: [ label, value ]

    SlugField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ slug ]
              description: Apostrophe field type id.
            def:
              type: string
              description: Default slug value shown in the editor UI.
            prefix:
              type: string
              description: >
                Optional prefix automatically prepended when generating the slug.
            source:
              type: string
              description: >
                Name of the field this slug should follow (usually "title").
                Works with `following`/`followingIgnore`.
            unique:
              type: boolean
              description: >
                If true, ensures slug is unique across docs of this type.
            pattern:
              type: string
              description: >
                Optional regex to further constrain allowed slugs.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: slug
              label: "URL Slug"
              source: "title"
              unique: true
              prefix: "blog/"
            - type: slug
              label: "Custom Slug"
              def: "my-custom-page"

    StringField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ string ]
              description: Apostrophe field type id.
            def:
              type: string
              description: Default value shown in the editor UI.
            textarea:
              type: boolean
              description: If true, renders a multiline textarea UI.
            min:
              type: integer
              description: Minimum number of characters allowed.
            max:
              type: integer
              description: Maximum number of characters allowed.
            pattern:
              type: string
              description: >
                Regular expression (string form) to validate the input. 
                Only matching values are allowed.
            autocomplete:
              type: string
              description: >
                Value of the HTML autocomplete attribute (see MDN).
                Use `"off"` to disable autocomplete.
            following:
              oneOf:
                - type: string
                - type: array
                  items:
                    type: string
              description: >
                Field(s) to follow for automatic value generation. Supports
                `<` prefixes to access parent fields.
            followingIgnore:
              oneOf:
                - type: boolean
                - type: array
                  items:
                    type: string
              description: >
                Controls which `following` values are ignored.
            sortify:
              type: boolean
              description: >
                If true, creates a parallel â€œsortifiedâ€ version of this field
                for case- and punctuation-insensitive sorting.
          required: [ type, label ]
          examples:
            - type: string
              label: "Dog Name"
              def: "Fido"
            - type: string
              label: "Biography"
              textarea: true
              max: 800
            - type: string
              label: "Meta Description"
              following: [ "title", "featured" ]
              followingIgnore: [ "featured" ]
              if:
                featured: true

    TimeField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ time ]
              description: Apostrophe field type id.
            def:
              type: string
              pattern: "^(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d$"
              description: >
                Default value in HH:MM:SS (24-hour). If not set and not
                required, defaults to the current time.
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: time
              label: "Event Time"
              def: "14:30:00"
            - type: time
              label: "Reminder Time"

    UrlField:
      allOf:
        - $ref: '#/components/schemas/BaseField'
        - type: object
          additionalProperties: false
          properties:
            type:
              type: string
              enum: [ url ]
              description: Apostrophe field type id.
            def:
              type: string
              format: uri
              description: Default URL shown in the editor UI.
            pattern:
              type: string
              description: >
                Optional regex for stricter validation of allowed URLs
                (in addition to standard URI syntax).
            autocomplete:
              type: string
              description: >
                Value for the HTML autocomplete attribute. Common values
                include "url" or "off".
            if:
              $ref: '#/components/schemas/UiCondition'
            requiredIf:
              $ref: '#/components/schemas/UiCondition'
          required: [ type, label ]
          examples:
            - type: url
              label: "Website"
              def: "https://example.com"
            - type: url
              label: "LinkedIn Profile"
              autocomplete: "url"
              requiredIf:
                hasLinkedIn: true

    # Built-in piece types
    User:
      type: object
      description: |
        Built-in user piece type for account management.
        ðŸ’¡ Developers can add custom fields to the user piece type in their project configuration.
      properties:
        _id:
          type: string
          description: "Unique identifier"
          example: "clx1234567890abcdef"
        title:
          type: string
          description: "User's display name"
          example: "John Developer"
        username:
          type: string
          description: "Login username (must be unique)"
          example: "johndeveloper"
        email:
          type: string
          format: email
          description: "User's email address"
          example: "john@example.com"
        role:
          type: string
          description: "User role - determines permissions"
          enum: ["guest", "contributor", "editor", "admin"]
          example: "editor"
        disabled:
          type: boolean
          description: "Whether the user account is disabled"
          default: false
        archived:
          type: boolean
          description: "Whether the user is archived"
          default: false
        visibility:
          type: string
          description: "Visibility setting"
          enum: ["public", "loginRequired"]
          default: "loginRequired"
        type:
          type: string
          example: "@apostrophecms/user"
        slug:
          type: string
          example: "user-johndeveloper"
        createdAt:
          type: string
          format: date-time
          description: "Account creation date"
        updatedAt:
          type: string
          format: date-time
          description: "Last update date"

    Global:
      type: object
      description: |
        Built-in global content piece type for site-wide settings.
        ðŸ’¡ Developers can add custom fields to the global piece type in their project configuration.
      properties:
        _id:
          type: string
          description: "Unique identifier"
          example: "global"
        title:
          type: string
          description: "Default title field (can be customized)"
          example: "My ApostropheCMS Site"
        type:
          type: string
          example: "@apostrophecms/global"

    Attachment:
      type: object
      description: "File attachment information from upload endpoint"
      properties:
        _id:
          type: string
          description: "Unique attachment identifier"
          example: "ckj0akbxa003vp39kfbxgb8zg"
        _url:
          type: string
          description: "URL to the original file"
          example: "https://example.net/uploads/attachments/ckj0akbxa003vp39kfbxgb8zg-blue-box.png"
        _urls:
          type: object
          description: "URLs for different image sizes (images only)"
          additionalProperties:
            type: string
        name:
          type: string
          description: "Slugified filename"
          example: "blue-box"
        title:
          type: string
          description: "Sortified filename"
          example: "blue box"
        extension:
          type: string
          description: "File extension"
          example: "png"
        type:
          type: string
          example: "attachment"
        group:
          type: string
          description: "File group type"
          example: "images"
        length:
          type: integer
          description: "File size in bytes"
          example: 10497
        md5:
          type: string
          description: "MD5 checksum"
          example: "630eeaaecd0bdc07c4a82eeca4c07588"
        width:
          type: integer
          description: "Image width in pixels (images only)"
          example: 600
        height:
          type: integer
          description: "Image height in pixels (images only)"
          example: 106
        landscape:
          type: boolean
          description: "Whether image is landscape orientation (images only)"
        portrait:
          type: boolean
          description: "Whether image is portrait orientation (images only)"
        docIds:
          type: array
          items:
            type: string
          description: "IDs of documents using this attachment"
        archivedDocIds:
          type: array
          items:
            type: string
          description: "IDs of archived documents using this attachment"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Image:
      type: object
      description: "Built-in image/media piece type for managing photos and graphics"
      properties:
        _id:
          type: string
          description: "Unique identifier"
          example: "clx1234567890abcdef"
        title:
          type: string
          description: "Image title/alt text"
          example: "Hero banner image"
        slug:
          type: string
          example: "hero-banner-image"
        type:
          type: string
          example: "@apostrophecms/image"
        archived:
          type: boolean
          default: false
        visibility:
          type: string
          enum: ["public", "loginRequired"]
          default: "public"
        attachment:
          type: object
          description: "File attachment information"
          properties:
            _id:
              type: string
            name:
              type: string
              example: "hero-banner"
            extension:
              type: string
              example: "jpg"
            length:
              type: integer
              description: "File size in bytes"
            url:
              type: string
              description: "Public URL to access the image"
              example: "/uploads/attachments/clx123/hero-banner.jpg"
        credit:
          type: string
          description: "Image credit or attribution"
        tags:
          type: array
          items:
            type: string
          description: "Image tags for organization"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    File:
      type: object
      description: "Built-in file piece type for general file uploads (PDFs, documents, etc.)"
      properties:
        _id:
          type: string
          description: "Unique identifier"
          example: "clx1234567890abcdef"
        title:
          type: string
          description: "File title/description"
          example: "Company Brochure"
        slug:
          type: string
          example: "company-brochure"
        type:
          type: string
          example: "@apostrophecms/file"
        archived:
          type: boolean
          default: false
        visibility:
          type: string
          enum: ["public", "loginRequired"]
          default: "public"
        attachment:
          type: object
          description: "File attachment information"
          properties:
            _id:
              type: string
            name:
              type: string
              example: "company-brochure"
            extension:
              type: string
              example: "pdf"
            length:
              type: integer
              description: "File size in bytes"
            url:
              type: string
              description: "Public URL to access the file"
              example: "/uploads/attachments/clx123/company-brochure.pdf"
        description:
          type: string
          description: "File description"
        tags:
          type: array
          items:
            type: string
          description: "File tags for organization"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ImageTag:
      type: object
      description: "Built-in image tag piece type for organizing images"
      properties:
        _id:
          type: string
          example: "clx1234567890abcdef"
        title:
          type: string
          description: "Tag name"
          example: "Hero Images"
        slug:
          type: string
          description: "URL-friendly tag name"
          example: "hero-images"
        type:
          type: string
          example: "@apostrophecms/image-tag"
        archived:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    FileTag:
      type: object
      description: "Built-in file tag piece type for organizing files"
      properties:
        _id:
          type: string
          example: "clx1234567890abcdef"
        title:
          type: string
          description: "Tag name"
          example: "Marketing Materials"
        slug:
          type: string
          description: "URL-friendly tag name"
          example: "marketing-materials"
        type:
          type: string
          example: "@apostrophecms/file-tag"
        archived:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    # API Response schemas
    PieceResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "Whether the request was successful"
        data:
          type: object
          description: "The piece data"
        error:
          type: string
          description: "Error message if success is false"

    PaginatedResponse:
      type: object
      description: "Standard response format for list endpoints"
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            results:
              type: array
              items:
                type: object
                description: "Array of pieces (type depends on endpoint)"
            pages:
              type: integer
              description: "Total number of pages"
            currentPage:
              type: integer
              description: "Current page number (1-based)"
            total:
              type: integer
              description: "Total number of items across all pages"

    CreatePieceRequest:
      type: object
      description: "Generic structure for creating any piece type"
      required:
        - title
      properties:
        title:
          type: string
          description: "Piece title (required for all piece types)"
        slug:
          type: string
          description: "URL slug (auto-generated from title if not provided)"
        visibility:
          type: string
          enum: ["public", "loginRequired"]
          description: "Visibility setting"
          default: "public"
        archived:
          type: boolean
          description: "Whether the piece is archived"
          default: false

    Error:
      type: object
      properties:
        status:
          type: integer
          description: HTTP status code, e.g., 401
        code:
          type: string
          description: Application error code (optional)
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          additionalProperties: true
          description: Extra context about the error
      required:
      - message

    # i18n schemas
    LocalesResponse:
      type: object
      description: "Object containing all configured locales"
      additionalProperties:
        type: object
        properties:
          label:
            type: string
            description: "Human-readable locale name"
            example: "English"
          _edit:
            type: boolean
            description: "Whether current user can edit content in this locale"
            example: true
      example:
        en:
          label: "English"
          _edit: true
        fr:
          label: "French"
          _edit: false

    LocaleRequest:
      type: object
      required:
        - locale
      properties:
        locale:
          type: string
          description: "Target locale code"
          example: "fr"
        contextDocId:
          type: string
          description: "Optional document ID for the path"
          example: "cloydg3ka0005qcls5vmg8sb9"
        clipboard:
          type: string
          description: "Optional clipboard content for cross-domain situations"
          example: "exampleClipboardContent"

    SameHostnameResponse:
      type: object
      additionalProperties: false
      required: [redirectTo]
      properties:
        redirectTo:
          type: string
          description: "Path to redirect to within same hostname"
          pattern: '^/(?!/).*'
          example: "/fr/page-slug"

    DifferentHostnameResponse:
      type: object
      additionalProperties: false
      required: [redirectTo]
      properties:
        redirectTo:
          type: string
          format: uri
          description: "Full URL to redirect to with cross-domain session token"
          pattern: '^[A-Za-z][A-Za-z0-9+.-]*://'
          example: "https://fr.example.com/french-example-page?aposCrossDomainSessionToken=generated_token"

    ExistInLocaleRequest:
      type: object
      required:
        - ids
        - locale
        - mode
      properties:
        ids:
          type: array
          items:
            type: string
          description: "Array of document IDs to check"
          example: ["cloydg3ka0005qcls5vmg8sb9", "cloydg3ka0005qcls5vmg8sb8"]
        locale:
          type: string
          description: "Locale to check documents in"
          example: "fr"
        mode:
          type: string
          enum: [draft, published]
          description: "Mode to check documents in"
          example: "published"

    ExistInLocaleResponse:
      type: object
      properties:
        originalLocaleIds:
          type: array
          items:
            type: string
          description: "Array of document IDs in the original locale and mode"
          example: ["cloydg3ka0005qcls5vmg8sb9:en:published", "cloydg3ka0005qcls5vmg8sb8:en:published"]
        newLocaleIds:
          type: array
          items:
            type: string
          description: "Array of document IDs in the new locale"
          example: ["cloydg3ka0005qcls5vmg8sb9:fr:published", "cloydg3ka0005qcls5vmg8sb8:fr:published"]
        aposDocIds:
          type: array
          items:
            type: string
          description: "Array of aposDocId values for the documents"
          example: ["cloydg3ka0005qcls5vmg8sb9", "cloydg3ka0005qcls5vmg8sb8"]

    # Core content schemas
    PageTreeResponse:
      type: object
      description: "Complete page data with nested children structure - perfect for building navigation"
      properties:
        _id:
          type: string
          description: "Unique document identifier"
          example: "ckhdscx5900054z9k88uqs16w"
        orphan:
          type: boolean
          description: "Whether page is excluded from navigation menus"
          example: false
        visibility:
          type: string
          enum: [public, loginRequired, private]
          description: "Page visibility setting - controls who can view this page"
          example: "public"
        type:
          type: string
          description: "Page type identifier (configured in your project)"
          example: "@apostrophecms/home-page"
        title:
          type: string
          description: "Page title - used for navigation and SEO"
          example: "Home Page"
        slug:
          type: string
          description: "URL slug for the page"
          example: "/"
        rank:
          type: integer
          description: "Order among sibling pages (for navigation sorting)"
          example: 0
        level:
          type: integer
          description: "Page tree depth level (0 = home page)"
          example: 0
        path:
          type: string
          description: "Ancestor path of page IDs"
          example: "ckhdscx5900054z9k88uqs16w"
        _url:
          type: string
          format: uri
          description: "Complete page URL - use this for links"
          example: "http://localhost:3000/"
        _ancestors:
          type: array
          items:
            $ref: '#/components/schemas/PageSummary'
          description: "Array of ancestor pages (for breadcrumbs)"
        _children:
          type: array
          items:
            $ref: '#/components/schemas/PageTreeResponse'
          description: "Array of child pages (nested structure)"
        createdAt:
          type: string
          format: date-time
          description: "ISO date of creation"
        updatedAt:
          type: string
          format: date-time
          description: "ISO date of last update"
        archived:
          type: boolean
          description: "Whether page is archived (hidden from normal views)"
          example: false
        historicUrls:
          type: array
          items:
            type: string
          description: "Previous URLs that redirect to this page (SEO preservation)"
        metaType:
          type: string
          example: "doc"
        titleSortified:
          type: string
          description: "Sortable version of title"
        updatedBy:
          $ref: '#/components/schemas/User'
        _edit:
          type: boolean
          description: "Whether current user can edit this page"

    FlatPageResponse:
      type: object
      description: "Pages returned as flat array instead of tree structure"
      properties:
        results:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/PageTreeResponse'
              - type: object
                properties:
                  _children:
                    type: array
                    items:
                      type: string
                    description: "Array of child page IDs (in flat response)"
                  _ancestors:
                    type: array
                    items:
                      type: string
                    description: "Array of ancestor page IDs (in flat response)"

    PageSummary:
      type: object
      description: "Abbreviated page information for ancestors/references"
      properties:
        _id:
          type: string
        title:
          type: string
        slug:
          type: string
        type:
          type: string
        _url:
          type: string
          format: uri
        level:
          type: integer
        rank:
          type: integer

    PageCreateRequest:
      type: object
      required:
        - _targetId
        - _position
        - title
      properties:
        _targetId:
          type: string
          description: "ID of target page for positioning (_home and _archive are convenience values)"
          example: "ckhdscx5900054z9k88uqs16w"
        _position:
          oneOf:
            - type: string
              enum: [before, after, firstChild, lastChild]
            - type: integer
              minimum: 0
          description: "Position relative to target (string values) or child index (number)"
          example: "firstChild"
        _copyingId:
          type: string
          description: "Optional ID of existing page to copy properties from"
        title:
          type: string
          description: "Page title"
          example: "My New Page"
        slug:
          type: string
          description: "URL slug (auto-generated if not provided)"
          example: "/my-new-page"
        type:
          type: string
          description: "Page type (must be configured in your project)"
          example: "default-page"
        visibility:
          type: string
          enum: [public, loginRequired, private]
          default: public
          description: "Who can view this page"

    PageUpdateRequest:
      type: object
      properties:
        _targetId:
          type: string
          description: "ID of target page for repositioning (required if moving page)"
        _position:
          oneOf:
            - type: string
              enum: [before, after, firstChild, lastChild]
            - type: integer
              minimum: 0
          description: "New position (required if moving page)"
        title:
          type: string
          description: "Updated page title"
        slug:
          type: string
          description: "Updated URL slug"
        visibility:
          type: string
          enum: [public, loginRequired, private]
          description: "Updated visibility setting"
        updatedBy:
          $ref: '#/components/schemas/User'

    Widget:
      type: object
      description: "Content widget within an area - represents a piece of structured content"
      properties:
        _id:
          type: string
        metaType:
          type: string
          enum: [widget]
        type:
          type: string
          description: "Widget type (e.g., rich-text, image, custom widgets)"
          example: "@apostrophecms/rich-text"
        _edit:
          type: boolean
        _docId:
          type: string
        # Rich text widget specific properties
        content:
          type: string
          description: "HTML content for rich text widgets (filtered based on widget configuration)"
          example: "<p>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum <strong>nibh, ut fermentum massa justo sit amet risus.</strong></p>"
        import:
          type: object
          description: "Import configuration for external content (used during creation/update)"
          properties:
            baseUrl:
              type: string
              format: uri
              description: "Base URL for resolving relative image URLs"
              example: "https://myoldsite.com"
            html:
              type: string
              description: "HTML content to import (images will be automatically imported)"
              example: "<p>Here is some text.</p>\n<img src=\"/my-image.jpg\" />"
            imageTags:
              type: array
              items:
                type: string
              description: "Array of existing @apostrophecms/image-tag piece _ids to apply to imported images"
              example: ["tag-piece-id-1", "tag-piece-id-2"]

    PageDotNotationUpdate:
      type: object
      description: Keys may use Apostrophe dot notation to target nested content.
      # allow keys like "a.b", "a.b.0.c"
      propertyNames:
        pattern: '^[a-zA-Z0-9_]+(?:\.[a-zA-Z0-9_]+|\.\d+)+$'
      # values can be of common JSON types
      additionalProperties:
        oneOf:
          - type: string
          - type: number
          - type: boolean
          - type: object
          - type: array
            items: {}
          - type: 'null'

    # schema helpers
    # Common options all fields can take
    BaseField:
      type: object
      additionalProperties: false
      properties:
        type:
          type: string
          description: Apostrophe field type id (e.g., "float", "string", "boolean").
        label:
          type: string
          description: Human-readable label for editors.
        help:
          type: string
          description: Short helper text shown in the UI.
        htmlHelp:
          type: string
          description: Rich helper text (HTML allowed by Apostrophe).
        def:
          description: Default value for this field (type varies by field).
        required:
          type: boolean
          description: If true, value must be provided.
        readOnly:
          type: boolean
          description: If true, UI should render as read-only (Apostrophe option).
        hidden:
          type: boolean
          description: If true, hide in editor UI.
        if:
          $ref: '#/components/schemas/UiCondition'
        requiredIf:
          $ref: '#/components/schemas/UiCondition'
      required: [ type, label ]

    # Conditional schema
    UiCondition:
      type: object
      additionalProperties: false
      description: >
        Apostrophe conditional used by `if` and `requiredIf`. Keys are field
        paths (including `<` parent access and dot notation) or method calls
        with `()`. Values are either simple equality (primitive) or an
        operator object. Supports `$or` / `$and` groups. See OperatorObject.
      properties:
        $or:
          type: array
          description: Any condition group may pass. :contentReference[oaicite:1]{index=1}
          items:
            $ref: '#/components/schemas/UiCondition'
        $and:
          type: array
          description: All condition groups must pass. (Redundant at the same level, but useful when nested with `$or`.) :contentReference[oaicite:2]{index=2}
          items:
            $ref: '#/components/schemas/UiCondition'
      patternProperties:
        # Field paths in the current modal, including dot notation:
        # e.g. "priority", "assignee.length", "tasks.0.priority"
        '^[A-Za-z_][\\w-]*(?:\\.(?:length|\\d+|[A-Za-z_][\\w-]*))*$':
          $ref: '#/components/schemas/FieldPredicate'
        # Parent/grandparent accessors using "<", "<<", "<<<", etc.:
        # e.g. "<projectType", "<tasks.length", "<tasks.0.priority"
        '^<+[A-Za-z_][\\w-]*(?:\\.(?:length|\\d+|[A-Za-z_][\\w-]*))*$':
          $ref: '#/components/schemas/FieldPredicate'
        # Method calls with optional module prefix:
        # e.g. "isSponsored()", "grant:multipleFundingSources()"
        '^(?:[A-Za-z0-9_-]+:)?[A-Za-z0-9_-]+\\(\\)$':
          $ref: '#/components/schemas/FieldPredicate'
      examples:
        - priority: { $in: ['high', 'critical'] }
          estimatedHours: { $gte: 20 }
          'assignee.length': { $gt: 0 } # empty string caveat: use length or $ne '' :contentReference[oaicite:3]{index=3}
        - $or:
            - { seenMovie: true }
            - { 'featuredMovie()': true } # method returns primitive; strict equality only :contentReference[oaicite:4]{index=4}

    FieldPredicate:
      description: A simple equality (primitive) or an OperatorObject. :contentReference[oaicite:5]{index=5}
      oneOf:
        - type: string
        - type: number
        - type: boolean
        - type: 'null'
        - $ref: '#/components/schemas/OperatorObject'

    OperatorObject:
      type: object
      additionalProperties: false
      description: >
        MongoDB-style operators supported by Apostrophe conditions.
        Note: `$eq` has special handling with arrays (see docs).
        `$exists: true` means not null/undefined; empty string is truthy so use `$ne: ''` or check `.length`. :contentReference[oaicite:6]{index=6}
      properties:
        $eq: {}
        $ne: {}
        $gt:
          type: number
        $gte:
          type: number
        $lt:
          type: number
        $lte:
          type: number
        $in:
          type: array
          items: {}
        $nin:
          type: array
          items: {}
        $exists:
          type: boolean
      example:
        $in: ['high', 'critical']

    # Numeric ranges (reusable by float, integer, etc.)
    NumericRangeOptions:
      type: object
      additionalProperties: false
      properties:
        min:
          type: number
          description: Minimum allowed value (inclusive).
        max:
          type: number
          description: Maximum allowed value (inclusive)

    # --- Shared Date and DateAndTime boundary mixins ---
    DateBoundaryOptions:
      type: object
      additionalProperties: false
      properties:
        min:
          type: string
          format: date
          description: Minimum allowed date (inclusive), ISO-8601 (YYYY-MM-DD).
        max:
          type: string
          format: date
          description: Maximum allowed date (inclusive), ISO-8601 (YYYY-MM-DD).

    DateTimeBoundaryOptions:
      type: object
      additionalProperties: false
      properties:
        min:
          type: string
          format: date-time
          description: Minimum allowed timestamp (inclusive), RFC 3339.
        max:
          type: string
          format: date-time
          description: Maximum allowed timestamp (inclusive), RFC 3339.

    # --- Array type helpers ---
    RelationshipEntry:
      type: object
      description: >
        One relationship entry. Always includes the related document `_id`.
        If you declared per-relationship `fields`, those values are stored
        alongside `_id` here.
      properties:
        _id:
          type: string
          description: Id of the related document.
      required: [ _id ]
      additionalProperties: true

    Fieldset:
      type: object
      additionalProperties: false
      properties:
        add:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/FieldDefinition'
      required: [ add ]

    FieldDefinition:
      oneOf:
        - $ref: '#/components/schemas/BooleanField'
        - $ref: '#/components/schemas/StringField'
        - $ref: '#/components/schemas/IntegerField'
        - $ref: '#/components/schemas/FloatField'
        - $ref: '#/components/schemas/SelectField'
        - $ref: '#/components/schemas/RadioField'
        - $ref: '#/components/schemas/CheckboxesField'
        - $ref: '#/components/schemas/PasswordField'
        - $ref: '#/components/schemas/ColorField'
        - $ref: '#/components/schemas/DateField'
        - $ref: '#/components/schemas/DateAndTimeField'
        - $ref: '#/components/schemas/TimeField'
        - $ref: '#/components/schemas/EmailField'
        - $ref: '#/components/schemas/UrlField'
        - $ref: '#/components/schemas/SlugField'
        - $ref: '#/components/schemas/OembedField'
        - $ref: '#/components/schemas/RangeField'
        - $ref: '#/components/schemas/ObjectField'
        - $ref: '#/components/schemas/ArrayField'
        - $ref: '#/components/schemas/AreaField'
        - $ref: '#/components/schemas/AttachmentField'
        - $ref: '#/components/schemas/RelationshipField'
        - $ref: '#/components/schemas/RelationshipReverseField'

      discriminator:
        propertyName: type
        mapping:
          boolean:        '#/components/schemas/BooleanField'
          string:         '#/components/schemas/StringField'
          integer:        '#/components/schemas/IntegerField'
          float:          '#/components/schemas/FloatField'
          select:         '#/components/schemas/SelectField'
          radio:          '#/components/schemas/RadioField'
          checkboxes:     '#/components/schemas/CheckboxesField'
          password:       '#/components/schemas/PasswordField'
          color:          '#/components/schemas/ColorField'
          date:           '#/components/schemas/DateField'
          dateAndTime:    '#/components/schemas/DateAndTimeField'
          time:           '#/components/schemas/TimeField'
          email:          '#/components/schemas/EmailField'
          url:            '#/components/schemas/UrlField'
          slug:           '#/components/schemas/SlugField'
          oembed:         '#/components/schemas/OembedField'
          range:          '#/components/schemas/RangeField'
          object:         '#/components/schemas/ObjectField'
          array:          '#/components/schemas/ArrayField'
          area:           '#/components/schemas/AreaField'
          attachment:     '#/components/schemas/AttachmentField'
          relationship:   '#/components/schemas/RelationshipField'
          relationshipReverse: '#/components/schemas/RelationshipReverseField'

    AposPrimitives:
      $id: https://example.com/apostrophe/primitives
      $schema: https://json-schema.org/draft/2020-12/schema
      description: >
        Reusable primitive data shapes for ApostropheCMS document payloads.
        Use these in content models; keep field-definition objects separate.

      $defs:
        # â”€â”€ strings â”€â”€
        AposString:
          type: string

        AposStringArray:
          type: array
          items: { $ref: '#/components/schemas/AposPrimitives/$defs/AposString' }

        AposSlug:
          type: string
          pattern: '^[a-z0-9][a-z0-9-]*$'
          description: >
            Slug string stored in the document, usually lowercase and URL-safe
            (e.g. "my-article", "blog/my-custom-page").

        AposEmail:
          type: string
          format: email
          description: >
            A valid email address per RFC 5322, as stored in documents and returned via the API.

        AposURI:
          type: string
          format: uri
          description: >
            A valid absolute URL (RFC 3986). Usually stored with protocol,
            e.g., "https://example.com".

        AposPassword:
          type: string
          description: >
            Password string as entered. Apostrophe typically hashes this
            before storage; API usage depends on context.

        # Dates/times (serialize as strings)
        AposDateTime:
          type: string
          format: date-time
          description: ISO-8601 calendar date (YYYY-MM-DD).

        AposDate:
          type: string
          format: date
          description: RFC 3339 timestamp (e.g., 2025-08-29T13:00:00Z).

        AposTime:
          type: string
          pattern: "^(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d$"
          description: >
            Time string stored in documents, always in HH:MM:SS (24-hour).

        # â”€â”€ numbers â”€â”€
        AposInteger:
          type: integer

        AposIntegerArray:
          type: array
          items: { $ref: '#/components/schemas/AposPrimitives/$defs/AposInteger' }

        AposFloat:        # use for JS number / Mongo double/decimal payloads
          type: number

        AposFloatArray:
          type: array
          items: { $ref: '#/components/schemas/AposPrimitives/$defs/AposFloat' }

        AposRange:
          type: number
          description: >
            Stored numeric value selected via the slider (integer or float,
            depending on configuration).

        # â”€â”€ booleans â”€â”€
        AposBoolean:
          type: boolean

        AposBooleanArray:
          type: array
          items: { $ref: '#/components/schemas/AposPrimitives/$defs/AposBoolean' }

        # â”€â”€ Selections â”€â”€
        AposRadio:
          oneOf:
            - type: string
            - type: number
            - type: boolean
          description: >
            The stored value for a radio field (one of the choice values).

        AposCheckboxes:
          type: array
          items:
            oneOf:
              - type: string
              - type: number
              - type: boolean
          description: >
            The stored values for a checkboxes field. Each item is one of the
            configured choice values.

        # â”€â”€ Complex shapes â”€â”€
        AposOembed:
          type: object
          additionalProperties: false
          properties:
            url:
              type: string
              format: uri
              description: Original media URL saved by the editor.
            title:
              type: string
              description: Title snapshot from the oEmbed response at save time.
            thumbnail:
              type: string
              format: uri
              description: Thumbnail URL snapshot from the oEmbed response at save time.
          required: [ url ]
          description: >
            Data stored on the document: a snapshot of the oEmbed resource.
            Fetch full embed HTML at runtime via GET
            `/api/v1/@apostrophecms/oembed/query?url=<media-url>`.

        AposArea:
          type: object
          additionalProperties: false
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Widget'
          required: [ items ]
          description: >
            The value saved on the doc: an object with an `items` array of widgets.

                # --- Data value (whatâ€™s stored on the doc) ---

        AposAttachment:
          type: object
          description: >
            Attachment metadata saved on the document. Extra fields may be present
            depending on project config and file type (e.g., image dimensions).
          additionalProperties: true
          properties:
            _id:
              type: string
              description: Internal id of the uploaded file.
            name:
              type: string
              description: Basename without extension.
            extension:
              type: string
              description: File extension (e.g., "pdf", "png").
            mimeType:
              type: string
              description: MIME type (e.g., "application/pdf", "image/png").
            group:
              type: string
              description: Broad file group (e.g., "images", "office", "video", "audio", "generic").
            size:
              type: integer
              description: File size in bytes.
            width:
              type: integer
              description: Image width in pixels (if applicable).
            height:
              type: integer
              description: Image height in pixels (if applicable).
          required: [ _id ]

        AposRelationship:
          description: >
            The stored value of a relationship field. For multi-select joins, this
            is an array of entries. For `max: 1`, treat it as either a single entry
            or null. An entry always contains at least the related `_id`; additional
            keys may appear if `fields` were defined.
          oneOf:
            - $ref: '#/components/schemas/RelationshipEntry'
            - type: "null"
            - type: array
              items:
                $ref: '#/components/schemas/RelationshipEntry'

        AposRelationshipReverse:
          type: array
          items:
            $ref: '#/components/schemas/RelationshipEntry'
          description: >
            Populated reverse relationships at read time. Not persisted on this document;
            useful in responses.

        # â”€â”€ IDs & generic JSON â”€â”€
        AposObjectId:
          type: string
          pattern: '^[a-fA-F0-9]{24}$'
          description: MongoDB ObjectId (24 hex chars)

        AposObjectIdArray:
          type: array
          items: { $ref: '#/components/schemas/AposPrimitives/$defs/AposObjectId' }

        AposJSON:         # bag-of-properties (areas, widgets often nest objects)
          type: object
          additionalProperties: true

        AposJSONArray:
          type: array
          items: { $ref: '#/components/schemas/AposPrimitives/$defs/AposJSON' }

        # â”€â”€ helpers for â€œnullableâ€ values (OAS 3.1 / JSON Schema) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        # Use via allOf/oneOf or inline when needed.
        NullableString:
          type: [string, 'null']

        NullableInteger:
          type: [integer, 'null']

        NullableNumber:
          type: [number, 'null']

        NullableBoolean:
          type: [boolean, 'null']

        NullableObjectId:
          type: [string, 'null']
          pattern: '^[a-fA-F0-9]{24}$'

    Article:
      type: object
      required:
        - _id
        - aposDocId
        - aposMode
        - type
        - title
      properties:
        _id:
          type: string
          description: Unique document identifier
          example: "ckxxxxxxxxxxxxxxxxxx"
          readOnly: true
        aposDocId:
          type: string
          description: ApostropheCMS document ID (same across draft/published versions)
          example: "ckxxxxxxxxxxxxxxxxxx"
          readOnly: true
        aposMode:
          type: string
          enum: ["draft", "published"]
          description: Document mode indicating whether this is a draft or published version
          example: "published"
          readOnly: true
        aposLocale:
          type: string
          description: Document locale/language code
          example: "en"
          default: "en"
        type:
          type: string
          description: Document type
          example: "@apostrophecms/article"
          readOnly: true
        title:
          type: string
          description: Article title
          example: "Getting Started with ApostropheCMS"
          minLength: 1
          maxLength: 200
        slug:
          type: string
          description: URL-friendly version of the title, auto-generated if not provided
          example: "getting-started-with-apostrophecms"
          pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
          readOnly: true
        body:
          type: string
          description: Article content in rich text format (HTML or structured content)
          example: "<p>This is the main content of the article with <strong>formatting</strong>...</p>"
        excerpt:
          type: string
          description: Brief summary or excerpt of the article
          example: "Learn the basics of building websites with ApostropheCMS in this comprehensive guide."
          maxLength: 500
        author:
          type: string
          description: Author identifier or name
          example: "john-doe"
        authorObject:
          type: object
          description: Full author information (populated when available)
          readOnly: true
          properties:
            _id:
              type: string
              example: "ckxxxxxxxxxxxxxxxxxx"
            title:
              type: string
              example: "John Doe"
            email:
              type: string
              format: email
              example: "john.doe@example.com"
        publishedAt:
          type: string
          format: date-time
          description: Publication date and time
          example: "2024-03-15T10:30:00Z"
        featured:
          type: boolean
          description: Whether this article should be featured prominently
          default: false
          example: false
        tags:
          type: array
          items:
            type: string
          description: Array of article tags for categorization
          example: ["cms", "tutorial", "web-development"]
          maxItems: 20
        category:
          type: string
          description: Article category
          example: "tutorials"
          enum: ["tutorials", "news", "guides", "case-studies", "announcements"]
        readingTime:
          type: integer
          description: Estimated reading time in minutes
          example: 5
          minimum: 1
          readOnly: true
        wordCount:
          type: integer
          description: Approximate word count of the article body
          example: 1250
          minimum: 0
          readOnly: true
        status:
          type: string
          description: Article publication status
          enum: ["draft", "published", "archived", "submitted"]
          example: "published"
          readOnly: true
        # SEO Fields
        metaTitle:
          type: string
          description: SEO meta title (falls back to title if not specified)
          example: "Getting Started with ApostropheCMS - Complete Guide"
          maxLength: 60
        metaDescription:
          type: string
          description: SEO meta description
          example: "Learn how to build amazing websites with ApostropheCMS in this comprehensive tutorial covering installation, configuration, and best practices."
          maxLength: 160
        metaKeywords:
          type: array
          items:
            type: string
          description: SEO keywords
          example: ["apostrophecms", "cms", "tutorial", "javascript", "nodejs"]
          maxItems: 10
        # Social Media Fields
        socialImage:
          type: object
          description: Social media sharing image
          properties:
            _id:
              type: string
              example: "ckxxxxxxxxxxxxxxxxxx"
            title:
              type: string
              example: "Article Social Image"
            extension:
              type: string
              example: "jpg"
            group:
              type: string
              example: "images"
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
        socialTitle:
          type: string
          description: Title for social media sharing (falls back to title if not specified)
          example: "Getting Started with ApostropheCMS"
          maxLength: 100
        socialDescription:
          type: string
          description: Description for social media sharing
          example: "Complete beginner's guide to ApostropheCMS"
          maxLength: 200
        # Timestamps
        createdAt:
          type: string
          format: date-time
          description: Document creation timestamp
          example: "2024-03-15T08:00:00Z"
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          description: Document last update timestamp
          example: "2024-03-15T12:30:00Z"
          readOnly: true
        createdBy:
          type: object
          description: User who created this document
          readOnly: true
          properties:
            _id:
              type: string
              example: "ckxxxxxxxxxxxxxxxxxx"
            title:
              type: string
              example: "Admin User"
            username:
              type: string
              example: "admin"
        updatedBy:
          type: object
          description: User who last updated this document
          readOnly: true
          properties:
            _id:
              type: string
              example: "ckxxxxxxxxxxxxxxxxxx"
            title:
              type: string
              example: "Editor User"
            username:
              type: string
              example: "editor"
        # Workflow and Publishing
        archived:
          type: boolean
          description: Whether the article is archived
          default: false
          example: false
          readOnly: true
        visibility:
          type: string
          description: Article visibility setting
          enum: ["public", "loginRequired", "private"]
          default: "public"
          example: "public"
        # Relationships
        relatedArticles:
          type: array
          items:
            type: object
            properties:
              _id:
                type: string
                example: "ckxxxxxxxxxxxxxxxxxx"
              title:
                type: string
                example: "Advanced ApostropheCMS Techniques"
              slug:
                type: string
                example: "advanced-apostrophecms-techniques"
          description: Related articles
          maxItems: 10
        # Custom Fields (examples of extensible fields)
        customFields:
          type: object
          description: Custom fields that can be extended based on project needs
          additionalProperties: true
          example:
            difficulty: "beginner"
            estimatedDuration: "30 minutes"
            prerequisites: ["basic-html", "nodejs"]
        # Version Information
        versionId:
          type: string
          description: Version identifier for this document revision
          example: "v1.2.3"
          readOnly: true
        parentId:
          type: string
          description: ID of the parent document (for versioning)
          example: "ckxxxxxxxxxxxxxxxxxx"
          readOnly: true
      example:
        _id: "ck9x7y8z9a0b1c2d3e4f5g6h"
        aposDocId: "ck9x7y8z9a0b1c2d3e4f5g6h"
        aposMode: "published"
        aposLocale: "en"
        type: "@apostrophecms/article"
        title: "Getting Started with ApostropheCMS"
        slug: "getting-started-with-apostrophecms"
        body: "<p>This comprehensive guide will walk you through the process of setting up and using <strong>ApostropheCMS</strong> for your next web project.</p><h2>Installation</h2><p>First, you'll need to install Node.js and MongoDB...</p>"
        excerpt: "Learn the basics of building websites with ApostropheCMS in this comprehensive guide covering installation, setup, and core concepts."
        author: "john-doe"
        authorObject:
          _id: "ck1a2b3c4d5e6f7g8h9i0j1k"
          title: "John Doe"
          email: "john.doe@example.com"
        publishedAt: "2024-03-15T10:30:00Z"
        featured: true
        tags: ["cms", "tutorial", "web-development", "nodejs"]
        category: "tutorials"
        readingTime: 8
        wordCount: 1850
        status: "published"
        metaTitle: "Getting Started with ApostropheCMS"
        metaDescription: "Learn how to build amazing websites with ApostropheCMS in this comprehensive tutorial covering installation, configuration, content management, and deployment."
        metaKeywords: ["apostrophecms", "cms", "tutorial", "javascript", "nodejs", "web-development"]
        socialTitle: "Master ApostropheCMS: Complete Beginner's Guide"
        socialDescription: "Everything you need to know to get started with ApostropheCMS"
        createdAt: "2024-03-15T08:00:00Z"
        updatedAt: "2024-03-15T12:30:00Z"
        createdBy:
          _id: "ck1a2b3c4d5e6f7g8h9i0j1k"
          title: "John Doe"
          username: "john.doe"
        updatedBy:
          _id: "ck1a2b3c4d5e6f7g8h9i0j1k"
          title: "John Doe"
          username: "john.doe"
        archived: false
        visibility: "public"
        relatedArticles:
          - _id: "ck2b3c4d5e6f7g8h9i0j1k2l"
            title: "Advanced ApostropheCMS Techniques"
            slug: "advanced-apostrophecms-techniques"
          - _id: "ck3c4d5e6f7g8h9i0j1k2l3m"
            title: "ApostropheCMS Deployment Guide"
            slug: "apostrophecms-deployment-guide"
        customFields:
          difficulty: "beginner"
          estimatedDuration: "45 minutes"
          prerequisites: ["basic-html", "nodejs-fundamentals"]
          lastReviewedAt: "2024-03-10T00:00:00Z"
        versionId: "v1.0.0"

    Event:
      type: object
      description: An event piece in ApostropheCMS representing scheduled activities, conferences, meetings, or other time-based content
      properties:
        _id:
          type: string
          description: Unique identifier for the event
          example: "ckxyz12345abcdef"
          readOnly: true
        title:
          type: string
          description: Event title
          example: "Annual Conference 2024"
          maxLength: 500
        slug:
          type: string
          description: URL-friendly version of the title used for routing
          example: "annual-conference-2024"
          pattern: "^[a-z0-9-]+$"
          maxLength: 200
        description:
          type: string
          description: Detailed description of the event
          example: "Join us for our annual conference featuring industry leaders, networking opportunities, and keynote presentations on the latest technology trends."
        startDate:
          type: string
          format: date-time
          description: Event start date and time in ISO 8601 format
          example: "2024-06-15T09:00:00Z"
        endDate:
          type: string
          format: date-time
          description: Event end date and time in ISO 8601 format
          example: "2024-06-15T17:00:00Z"
        allDay:
          type: boolean
          description: Whether the event runs all day (times are ignored if true)
          default: false
        location:
          type: string
          description: Physical or virtual location of the event
          example: "Convention Center, 123 Main St, Downtown"
          maxLength: 500
        virtualUrl:
          type: string
          format: uri
          description: URL for virtual events or online streaming
          example: "https://zoom.us/j/1234567890"
        category:
          type: string
          description: Event category or type
          example: "conference"
          enum: ["conference", "workshop", "meeting", "webinar", "social", "training", "other"]
        capacity:
          type: integer
          description: Maximum number of attendees
          minimum: 1
          example: 500
        registrationRequired:
          type: boolean
          description: Whether registration is required to attend
          default: false
        registrationUrl:
          type: string
          format: uri
          description: URL for event registration
          example: "https://eventbrite.com/register/12345"
        price:
          type: number
          format: float
          description: Event ticket price (0 for free events)
          minimum: 0
          example: 299.99
        currency:
          type: string
          description: Currency code for the price
          example: "USD"
          pattern: "^[A-Z]{3}$"
          default: "USD"
        organizer:
          type: object
          description: Event organizer information
          properties:
            name:
              type: string
              description: Organizer name
              example: "Tech Conference Group"
            email:
              type: string
              format: email
              description: Organizer contact email
              example: "info@techconference.com"
            phone:
              type: string
              description: Organizer phone number
              example: "+1 (555) 123-4567"
            website:
              type: string
              format: uri
              description: Organizer website
              example: "https://techconference.com"
        tags:
          type: array
          description: Array of tags associated with the event
          items:
            type: string
          example: ["technology", "networking", "conference"]
        featured:
          type: boolean
          description: Whether this event should be featured prominently
          default: false
        image:
          type: object
          description: Featured image for the event
          properties:
            _id:
              type: string
              description: Image attachment ID
            url:
              type: string
              format: uri
              description: Image URL
            alt:
              type: string
              description: Alternative text for accessibility
        gallery:
          type: array
          description: Additional images for the event
          items:
            type: object
            properties:
              _id:
                type: string
                description: Image attachment ID
              url:
                type: string
                format: uri
                description: Image URL
              alt:
                type: string
                description: Alternative text for accessibility
        published:
          type: boolean
          description: Whether the event is published and visible to the public
          default: false
          example: true
        visibility:
          type: string
          description: Visibility level of the event
          enum: ["public", "loginRequired", "private"]
          default: "public"
        aposMode:
          type: string
          description: ApostropheCMS mode (draft or published)
          enum: ["draft", "published"]
          example: "published"
          readOnly: true
        aposLocale:
          type: string
          description: Locale code for this version of the event
          example: "en"
          readOnly: true
        aposDocId:
          type: string
          description: Document ID shared across all locales
          example: "ckxyz12345abcdef:en:published"
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2024-01-15T10:30:00Z"
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          description: Last modification timestamp
          example: "2024-01-20T14:45:00Z"
          readOnly: true
        createdBy:
          type: object
          description: User who created the event
          readOnly: true
          properties:
            _id:
              type: string
              description: User ID
            title:
              type: string
              description: User display name
            username:
              type: string
              description: Username
        updatedBy:
          type: object
          description: User who last modified the event
          readOnly: true
          properties:
            _id:
              type: string
              description: User ID
            title:
              type: string
              description: User display name
            username:
              type: string
              description: Username
        type:
          type: string
          description: ApostropheCMS piece type
          enum: ["event"]
          default: "event"
          readOnly: true
        metaTitle:
          type: string
          description: SEO meta title (falls back to title if not set)
          maxLength: 60
          example: "Annual Conference 2024 - Register Now"
        metaDescription:
          type: string
          description: SEO meta description
          maxLength: 160
          example: "Join industry leaders at our annual conference. Network, learn, and discover the latest in technology innovation."
        searchText:
          type: string
          description: Searchable text content (automatically generated)
          readOnly: true
        archived:
          type: boolean
          description: Whether the event has been archived
          default: false
          readOnly: true
        orphan:
          type: boolean
          description: Whether the event is orphaned (not properly connected)
          default: false
          readOnly: true
        highSearchText:
          type: string
          description: High-priority search text content
          readOnly: true
        highSearchWords:
          type: array
          description: High-priority search keywords
          items:
            type: string
          readOnly: true
        lowSearchText:
          type: string
          description: Low-priority search text content
          readOnly: true
        searchSummary:
          type: string
          description: Brief summary for search results
          readOnly: true
      required:
        - title
      additionalProperties: false
      example:
        _id: "ckxyz12345abcdef"
        title: "Annual Conference 2024"
        slug: "annual-conference-2024"
        description: "Join us for our annual conference featuring industry leaders, networking opportunities, and keynote presentations on the latest technology trends."
        startDate: "2024-06-15T09:00:00Z"
        endDate: "2024-06-15T17:00:00Z"
        allDay: false
        location: "Convention Center, 123 Main St, Downtown"
        category: "conference"
        capacity: 500
        registrationRequired: true
        registrationUrl: "https://eventbrite.com/register/12345"
        price: 299.99
        currency: "USD"
        organizer:
          name: "Tech Conference Group"
          email: "info@techconference.com"
          phone: "+1 (555) 123-4567"
          website: "https://techconference.com"
        tags: ["technology", "networking", "conference"]
        featured: true
        published: true
        visibility: "public"
        aposMode: "published"
        aposLocale: "en"
        type: "event"
        metaTitle: "Annual Conference 2024 - Register Now"
        metaDescription: "Join industry leaders at our annual conference. Network, learn, and discover the latest in technology innovation."
        createdAt: "2024-01-15T10:30:00Z"
        updatedAt: "2024-01-20T14:45:00Z"

  responses:
    BadRequest:
      description: "Bad request - invalid input parameters"
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Invalid request parameters"
              message:
                type: string
                example: "The request could not be processed due to invalid input"

    Unauthorized:
      description: "Authentication required"
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Unauthorized"
              message:
                type: string
                example: "Authentication is required to access this resource"

    Forbidden:
      description: "Access forbidden - insufficient permissions"
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Forbidden"
              message:
                type: string
                example: "You do not have permission to perform this action"

    NotFound:
      description: "Resource not found"
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Not Found"
              message:
                type: string
                example: "The requested resource could not be found"

    InternalServerError:
      description: "Internal server error"
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Internal Server Error"
              message:
                type: string
                example: "An unexpected error occurred while processing the request"

    PieceOperationSuccess:
      description: "Operation completed successfully"
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: "Operation completed successfully"

paths:
  /@apostrophecms/article:
    x-apostrophe:
      isExample: true
      note: "Illustrative route only; requires the corresponding piece to exist in your project."
    get:
      tags:
        - (Example) Article
      summary: List articles
      description: Retrieve a list of articles with optional filtering, sorting, and pagination
      operationId: ArticleList
      parameters:
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
        - $ref: '#/components/parameters/RenderAreas'
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/Sort'
        - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Article'
                  pages:
                    type: integer
                    description: Total number of pages
                  currentPage:
                    type: integer
                    description: Current page number
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []
        - {}  # Allows unauthenticated access to published articles

    post:
      tags:
        - (Example) Article
      summary: Create article
      description: Create a new article (requires editor permissions or higher)
      operationId: ArticleCreate
      parameters:
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
              properties:
                title:
                  type: string
                  description: Article title
                  example: "Getting Started with ApostropheCMS"
                slug:
                  type: string
                  description: URL-friendly version of the title
                  example: "getting-started-with-apostrophecms"
                body:
                  type: string
                  description: Article content in rich text format
                  example: "This is the main content of the article..."
                excerpt:
                  type: string
                  description: Brief summary or excerpt of the article
                  example: "Learn the basics of building websites with ApostropheCMS"
                author:
                  type: string
                  description: Author ID or name
                  example: "john-doe"
                publishedAt:
                  type: string
                  format: date-time
                  description: Publication date and time
                  example: "2024-03-15T10:30:00Z"
                featured:
                  type: boolean
                  description: Whether this article should be featured
                  default: false
                tags:
                  type: array
                  items:
                    type: string
                  description: Array of article tags
                  example: ["cms", "tutorial", "web-development"]
                category:
                  type: string
                  description: Article category
                  example: "tutorials"
                metaTitle:
                  type: string
                  description: SEO meta title
                  example: "Getting Started with ApostropheCMS - Complete Guide"
                metaDescription:
                  type: string
                  description: SEO meta description
                  example: "Learn how to build amazing websites with ApostropheCMS in this comprehensive tutorial"
      responses:
        '201':
          description: Article created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/article/archive:
    post:
      tags:
        - (Example) Article
      summary: Archive articles
      description: Archive multiple articles, making them inactive while preserving their data
      operationId: ArticleArchive
      responses:
        '200':
          description: Articles archived successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/localize:
    post:
      tags:
        - (Example) Article
      summary: Localize articles
      description: Create or update localized versions of articles for different languages/regions
      operationId: ArticleLocalize
      responses:
        '200':
          description: Articles localized successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/publish:
    post:
      tags:
        - (Example) Article
      summary: Publish articles
      description: Publish multiple articles, making them live and visible to end users
      operationId: ArticlePublish
      responses:
        '200':
          description: Articles published successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/restore:
    post:
      tags:
        - (Example) Article
      summary: Restore articles
      description: Restore previously archived articles, making them active again
      operationId: ArticleRestore
      responses:
        '200':
          description: Articles restored successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}:
    delete:
      tags:
        - (Example) Article
      summary: Delete article
      description: Permanently delete a specific article by ID (requires appropriate permissions)
      operationId: ArticleDeleteById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      tags:
        - (Example) Article
      summary: Get article
      description: Retrieve a specific article by ID
      operationId: ArticleGetById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
        - $ref: '#/components/parameters/RenderAreas'
      responses:
        '200':
          description: Article retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []
        - {}  # Allows unauthenticated access to published articles

    patch:
      tags:
        - (Example) Article
      summary: Update article
      description: Partially update a specific article by ID using PATCH semantics
      operationId: ArticlePatchById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Article title
                  example: "Updated Article Title"
                slug:
                  type: string
                  description: URL-friendly version of the title
                  example: "updated-article-title"
                body:
                  type: string
                  description: Article content in rich text format
                  example: "Updated article content..."
                excerpt:
                  type: string
                  description: Brief summary or excerpt of the article
                  example: "Updated article excerpt"
                author:
                  type: string
                  description: Author ID or name
                  example: "jane-smith"
                publishedAt:
                  type: string
                  format: date-time
                  description: Publication date and time
                  example: "2024-03-16T14:30:00Z"
                featured:
                  type: boolean
                  description: Whether this article should be featured
                tags:
                  type: array
                  items:
                    type: string
                  description: Array of article tags
                  example: ["cms", "advanced", "web-development"]
                category:
                  type: string
                  description: Article category
                  example: "advanced-tutorials"
                metaTitle:
                  type: string
                  description: SEO meta title
                  example: "Updated Article Title - Advanced Guide"
                metaDescription:
                  type: string
                  description: SEO meta description
                  example: "Updated meta description for better SEO"
      responses:
        '200':
          description: Article updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

    put:
      tags:
        - (Example) Article
      summary: Replace article
      description: Completely replace a specific article by ID using PUT semantics
      operationId: ArticlePutById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
              properties:
                title:
                  type: string
                  description: Article title
                  example: "Replacement Article Title"
                slug:
                  type: string
                  description: URL-friendly version of the title
                  example: "replacement-article-title"
                body:
                  type: string
                  description: Article content in rich text format
                  example: "Complete replacement article content..."
                excerpt:
                  type: string
                  description: Brief summary or excerpt of the article
                  example: "Replacement article excerpt"
                author:
                  type: string
                  description: Author ID or name
                  example: "admin"
                publishedAt:
                  type: string
                  format: date-time
                  description: Publication date and time
                  example: "2024-03-17T09:00:00Z"
                featured:
                  type: boolean
                  description: Whether this article should be featured
                  default: false
                tags:
                  type: array
                  items:
                    type: string
                  description: Array of article tags
                  example: ["cms", "replacement", "content"]
                category:
                  type: string
                  description: Article category
                  example: "general"
                metaTitle:
                  type: string
                  description: SEO meta title
                  example: "Replacement Article Title - New Content"
                metaDescription:
                  type: string
                  description: SEO meta description
                  example: "This is a complete replacement article with new content"
      responses:
        '200':
          description: Article replaced successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/article/{_id}/dismiss-submission:
    post:
      tags:
        - (Example) Article
      summary: Dismiss article submission
      description: Dismiss a pending submission for the specified article, removing it from the review queue
      operationId: ArticleDismissSubmissionById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article submission dismissed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/locale/{toLocale}:
    get:
      tags:
        - (Example) Article
      summary: Get article locale
      description: Retrieve the specified article in a specific locale
      operationId: ArticleGetLocaleById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/ToLocale'
      responses:
        '200':
          description: Article locale retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/locales:
    get:
      tags:
        - (Example) Article
      summary: Get article locales
      description: Retrieve all available locales for the specified article
      operationId: ArticleGetLocalesById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article locales retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["en", "es", "fr", "de"]
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/localize:
    post:
      tags:
        - (Example) Article
      summary: Localize article
      description: Create a localized version of the specified article for a specific language/region
      operationId: ArticleLocalizeById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article localized successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/publish:
    post:
      tags:
        - (Example) Article
      summary: Publish article
      description: Publish the specified article, making it live and visible to end users
      operationId: ArticlePublishById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/revert-draft-to-published:
    post:
      tags:
        - (Example) Article
      summary: Revert draft to published
      description: Revert the draft version of the specified article back to its published state
      operationId: ArticleRevertDraftToPublishedById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article draft reverted to published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/revert-published-to-previous:
    post:
      tags:
        - (Example) Article
      summary: Revert published to previous
      description: Revert the published version of the specified article to its previous published state
      operationId: ArticleRevertPublishedToPreviousById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article published version reverted to previous successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/share:
    post:
      tags:
        - (Example) Article
      summary: Share article
      description: Generate a sharing link or configure sharing permissions for the specified article
      operationId: ArticleShareById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article shared successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/submit:
    post:
      tags:
        - (Example) Article
      summary: Submit article
      description: Submit the specified article for review and approval workflow
      operationId: ArticleSubmitById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/article/{_id}/unpublish:
    post:
      tags:
        - (Example) Article
      summary: Unpublish article
      description: Unpublish the specified article, removing it from public visibility while preserving the content
      operationId: ArticleUnpublishById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Article unpublished successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Article'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /@apostrophecms/event:
    get:
      tags:
        - (Example) Event
      summary: List events
      description: Retrieve a list of events with optional filtering, sorting, and pagination
      operationId: EventList
      parameters:
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
        - $ref: '#/components/parameters/RenderAreas'
        - name: page
          in: query
          description: Page number for pagination
          schema:
            type: integer
            default: 1
        - name: perPage
          in: query
          description: Number of items per page
          schema:
            type: integer
            default: 10
        - name: sort
          in: query
          description: Sort field and direction
          schema:
            type: string
            example: "createdAt:desc"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  pages:
                    type: integer
                  currentPage:
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []
        - {}  # Allows unauthenticated access

    post:
      tags:
        - (Example) Event
      summary: Create event
      description: Create a new event (requires editor permissions or higher)
      operationId: EventCreate
      parameters:
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Event title
                  example: "Annual Conference 2024"
                slug:
                  type: string
                  description: URL-friendly version of the title
                  example: "annual-conference-2024"
                description:
                  type: string
                  description: Event description
                  example: "Join us for our annual conference featuring industry leaders and networking opportunities."
                startDate:
                  type: string
                  format: date-time
                  description: Event start date and time
                  example: "2024-06-15T09:00:00Z"
                endDate:
                  type: string
                  format: date-time
                  description: Event end date and time
                  example: "2024-06-15T17:00:00Z"
                location:
                  type: string
                  description: Event location
                  example: "Convention Center, 123 Main St, City"
                published:
                  type: boolean
                  default: false
              required:
                - title
      responses:
        '201':
          description: Event created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/archive:
    post:
      tags:
        - (Example) Event
      summary: Archive events
      description: Archive multiple events, making them inactive while preserving their data
      operationId: EventArchive
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                _ids:
                  type: array
                  items:
                    type: string
                  description: Array of event IDs to archive
      responses:
        '200':
          description: Events archived successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  archived:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/localize:
    post:
      tags:
        - (Example) Event
      summary: Localize events
      description: Create or update localized versions of events for different languages/regions
      operationId: EventLocalize
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                _ids:
                  type: array
                  items:
                    type: string
                  description: Array of event IDs to localize
                toLocale:
                  type: string
                  description: Target locale code
                  example: "es"
      responses:
        '200':
          description: Events localized successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  localized:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/publish:
    post:
      tags:
        - (Example) Event
      summary: Publish events
      description: Publish multiple events, making them live and visible to end users
      operationId: EventPublish
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                _ids:
                  type: array
                  items:
                    type: string
                  description: Array of event IDs to publish
      responses:
        '200':
          description: Events published successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  published:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/restore:
    post:
      tags:
        - (Example) Event
      summary: Restore events
      description: Restore previously archived events, making them active again
      operationId: EventRestore
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                _ids:
                  type: array
                  items:
                    type: string
                  description: Array of event IDs to restore
      responses:
        '200':
          description: Events restored successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  restored:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}:
    delete:
      tags:
        - (Example) Event
      summary: Delete event
      description: Permanently delete a specific event by ID (requires appropriate permissions)
      operationId: EventDeleteById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

    get:
      tags:
        - (Example) Event
      summary: Get event
      description: Retrieve a specific event by ID
      operationId: EventGetById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
        - $ref: '#/components/parameters/RenderAreas'
      responses:
        '200':
          description: Event retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []
        - {}  # Allows unauthenticated access

    patch:
      tags:
        - (Example) Event
      summary: Update event
      description: Partially update a specific event by ID using PATCH semantics
      operationId: EventPatchById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Event title
                slug:
                  type: string
                  description: URL-friendly version of the title
                description:
                  type: string
                  description: Event description
                startDate:
                  type: string
                  format: date-time
                  description: Event start date and time
                endDate:
                  type: string
                  format: date-time
                  description: Event end date and time
                location:
                  type: string
                  description: Event location
                published:
                  type: boolean
      responses:
        '200':
          description: Event updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

    put:
      tags:
        - (Example) Event
      summary: Replace event
      description: Completely replace a specific event by ID using PUT semantics
      operationId: EventPutById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/AposLocale'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Event title
                slug:
                  type: string
                  description: URL-friendly version of the title
                description:
                  type: string
                  description: Event description
                startDate:
                  type: string
                  format: date-time
                  description: Event start date and time
                endDate:
                  type: string
                  format: date-time
                  description: Event end date and time
                location:
                  type: string
                  description: Event location
                published:
                  type: boolean
              required:
                - title
      responses:
        '200':
          description: Event replaced successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/dismiss-submission:
    post:
      tags:
        - (Example) Event
      summary: Dismiss event submission
      description: Dismiss a pending submission for the specified event, removing it from the review queue
      operationId: EventDismissSubmissionById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event submission dismissed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/locale/{toLocale}:
    get:
      tags:
        - (Example) Event
      summary: Get event locale
      description: Retrieve the specified event in a specific locale
      operationId: EventGetLocaleById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
        - $ref: '#/components/parameters/ToLocale'
        - $ref: '#/components/parameters/AposMode'
        - $ref: '#/components/parameters/RenderAreas'
      responses:
        '200':
          description: Event locale retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []
        - {}  # Allows unauthenticated access

  /@apostrophecms/event/{_id}/locales:
    get:
      tags:
        - (Example) Event
      summary: Get event locales
      description: Retrieve all available locales for the specified event
      operationId: EventGetLocalesById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event locales retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["en", "es", "fr", "de"]
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/localize:
    post:
      tags:
        - (Example) Event
      summary: Localize event
      description: Create a localized version of the specified event for a specific language/region
      operationId: EventLocalizeById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                toLocale:
                  type: string
                  description: Target locale code
                  example: "es"
      responses:
        '200':
          description: Event localized successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/publish:
    post:
      tags:
        - (Example) Event
      summary: Publish event
      description: Publish the specified event, making it live and visible to end users
      operationId: EventPublishById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/revert-draft-to-published:
    post:
      tags:
        - (Example) Event
      summary: Revert draft to published
      description: Revert the draft version of the specified event back to its published state
      operationId: EventRevertDraftToPublishedById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event draft reverted to published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/revert-published-to-previous:
    post:
      tags:
        - (Example) Event
      summary: Revert published to previous
      description: Revert the published version of the specified event to its previous published state
      operationId: EventRevertPublishedToPreviousById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event published version reverted to previous successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/share:
    post:
      tags:
        - (Example) Event
      summary: Share event
      description: Generate a sharing link or configure sharing permissions for the specified event
      operationId: EventShareById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                shareType:
                  type: string
                  enum: ["link", "email"]
                  description: Type of sharing
                recipients:
                  type: array
                  items:
                    type: string
                    format: email
                  description: Email recipients (for email sharing)
                expiresAt:
                  type: string
                  format: date-time
                  description: Expiration date for the share link
      responses:
        '200':
          description: Event shared successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  shareUrl:
                    type: string
                    format: uri
                    description: Generated sharing URL
                  event:
                    $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/submit:
    post:
      tags:
        - (Example) Event
      summary: Submit event
      description: Submit the specified event for review and approval workflow
      operationId: EventSubmitById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []

  /@apostrophecms/event/{_id}/unpublish:
    post:
      tags:
        - (Example) Event
      summary: Unpublish event
      description: Unpublish the specified event, removing it from public visibility while preserving the content
      operationId: EventUnpublishById
      parameters:
        - $ref: '#/components/parameters/DocumentId'
      responses:
        '200':
          description: Event unpublished successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - ApiKeyAuth: []
        - BearerAuth: []
        - SessionAuth: []