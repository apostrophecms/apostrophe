{# widget always knows its options and data for player use. #}
{# however ginormous joined objects are elided. Use APIs to #}
{# get them if you need them (TODO: consider ways of #}
{# whitelisting them for the inline JSON attributes) #}
<div class="apos-area-widget-wrapper{% if data.options.class %} {{ data.options.class }}{% endif %}" data-apos-widget-wrapper="{{ data.widget.type }}">
  {# This wrapper exists for editor.js to inject contextual widget insertion controls into,
    since those are area level controls rather than widget level #}
  <div class="apos-area-widget{% if data.manager.options.contextualOnly %} apos-area-widget--contextual{% endif %}" data-apos-widget="{{ data.widget.type }}" data-apos-widget-id="{{ data.widget._id }}" data='{{ data.dataFiltered | jsonAttribute({ single: true }) }}' data-options='{{ data.manager.filterOptionsForDataAttribute(apos.utils.omit(data.options, 'area')) | jsonAttribute({ single: true }) }}'>
    {%- if data.widget._edit and data.options.edit != false -%}
      {%- include 'widgetControls.html' -%}
    {%- endif -%}
    {{ data.output() | safe }}
  </div>
</div>
